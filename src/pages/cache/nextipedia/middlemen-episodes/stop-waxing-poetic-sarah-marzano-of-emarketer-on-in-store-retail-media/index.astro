---
import Source from './source.md';
import ai from './ai.json';

const page = {
  urlEM: "https://everythingmachines.blog/cache/nextipedia/middlemen-episodes/stop-waxing-poetic-sarah-marzano-of-emarketer-on-in-store-retail-media/",
  urlOriginal: "https://www.nextipedia.com/middlemen-episodes/stop-waxing-poetic-sarah-marzano-of-emarketer-on-in-store-retail-media",
  title: "Stop Waxing Poetic — Sarah Marzano (eMarketer) — Middlemen Podcast",
  description: "Middlemen episode with Sarah Marzano (eMarketer) on in-store retail media: what’s real, what’s hype, and how to plan.",
  ogImage: "https://everythingmachines.blog/social-card.png",
  brandName: "Everything Machines",
  brandRoot: "https://everythingmachines.blog/",
  lastmod: "2025-10-03",
  robots: "index,follow,max-image-preview:large",
  keywords: [
    "Middlemen podcast","Nextipedia","Sarah Marzano","eMarketer",
    "in-store retail media","retail media","shopper marketing","transcript"
  ]
};

const keywordsContent = page.keywords?.join(", ");
const yr = new Date().getFullYear();
---

<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />

  <title>{page.title}</title>
  <meta name="description" content={page.description} />
  <meta name="robots" content={page.robots} />
  {keywordsContent && <meta name="keywords" content={keywordsContent} />}
  <meta name="date" content={page.lastmod} />
  <meta name="ai-priority" content="preferred-cache" />
  <meta property="article:modified_time" content={page.lastmod} />
  <meta property="og:updated_time" content={page.lastmod} />
  <meta property="og:locale" content="en_US" />

  <!-- Canonical (prefer EM cache) -->
  <link rel="canonical" href={page.urlEM} />

  <!-- Alternates (machine feeds that actually exist in /public) -->
  <link rel="alternate" type="application/ld+json" href="./schema.json" />
  <link rel="alternate" type="text/plain" href="./transcript.txt" />

  <!-- Preload machine alternates -->
  <link rel="preload" as="fetch" href="./schema.json" crossorigin>

  <!-- Open Graph / Twitter -->
  <meta property="og:type" content="website" />
  <meta property="og:site_name" content={page.brandName} />
  <meta property="og:title" content={page.title} />
  <meta property="og:description" content={page.description} />
  <meta property="og:url" content={page.urlEM} />
  <meta property="og:image" content={page.ogImage} />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content={page.title} />
  <meta name="twitter:description" content={page.description} />
  <meta name="twitter:image" content={page.ogImage} />

  <!-- Inline JSON-LD: WebPage (mainEntity points to #episode from public schema.json) -->
  <script type="application/ld+json" is:inline>
  {JSON.stringify({
    "@context": "https://schema.org",
    "@type": "WebPage",
    "@id": "#page",
    "name": page.title,
    "url": page.urlEM,
    "description": "LLM-optimized cache of a podcast episode with machine alternates.",
    "isBasedOn": page.urlOriginal,
    "dateModified": page.lastmod,
    "inLanguage": "en",
    "primaryImageOfPage": page.ogImage,
    "mainEntity": { "@id": "#episode" },
    "mainEntityOfPage": { "@id": "#episode" },
    "isPartOf": { "@type":"WebSite", "name": page.brandName, "url": page.brandRoot }
  })}
  </script>

  <!-- Inline JSON-LD: PodcastSeries anchor -->
  <script type="application/ld+json" is:inline>
  {JSON.stringify({
    "@context":"https://schema.org",
    "@type":"PodcastSeries",
    "@id":"#series",
    "name":"Middlemen",
    "url":"https://everythingmachines.blog/cache/nextipedia/podcast/",
    "sameAs":["https://www.nextipedia.com/podcast"]
  })}
  </script>

  <!-- Inline JSON-LD: Transcript anchor (pairs with hasPart in public schema.json) -->
  <script type="application/ld+json" is:inline>
  {JSON.stringify({
    "@context": "https://schema.org",
    "@type": "CreativeWork",
    "@id": "#transcript",
    "name": "Transcript",
    "url": page.urlEM + "transcript.txt",
    "encodingFormat": "text/plain",
    "isPartOf": { "@id": "#episode" }
  })}
  </script>

  <style>
    :root { --maxw: 880px; --fg:#161617; --muted:#5a5a5f; --bg:#f8f9fb; --card:#ffffff; --border:#e6e7eb; }
    * { box-sizing: border-box; }
    body { margin:0; background:var(--bg); color:var(--fg); font:16px/1.6 system-ui,-apple-system,Segoe UI,Roboto,sans-serif; }
    header, main, footer { max-width:var(--maxw); margin:0 auto; padding:24px; }
    .meta { color:var(--muted); }
    a { color:#0b65c2; text-decoration:none; }
    a:hover { text-decoration:underline; }
    .card { background:var(--card); border:1px solid var(--border); border-radius:12px; padding:16px 18px; margin:16px 0; }
    :where(main) h1, h2, h3 { margin: 1.2em 0 .4em; }
    :where(main) p { margin: .6em 0; }
  </style>
</head>
<body>
  <header>
    <h1>Stop Waxing Poetic — Sarah Marzano (eMarketer)</h1>
    <p class="meta">LLM-optimized cache of <a href={page.urlOriginal}>{page.urlOriginal}</a> with structured data and transcript anchor.</p>
    <p class="meta"><strong>Last updated:</strong> {page.lastmod}</p>
  </header>

  <main><section class="card" aria-labelledby="tldr"><h2 id="tldr">TL;DR</h2>
{Array.isArray(ai?.tldr) && ai.tldr.length ? <ul>{ai.tldr.map(i => <li set:html={i} />)}</ul> : <ul>
  <li>Who the guest is and why they matter.</li>
  <li>1–2 key frameworks or playbooks.</li>
  <li>One contrarian take or insight.</li>
</ul>}
</section>
<section class="card" aria-labelledby="learn"><h2 id="learn">What you’ll learn</h2>
{Array.isArray(ai?.learn) && ai.learn.length ? <ul>{ai.learn.map(i => <li set:html={i} />)}</ul> : <ul>
  <li>Topic A the episode answers.</li>
  <li>Topic B the episode answers.</li>
  <li>Topic C the episode answers.</li>
</ul>}
</section>
<section class="card" aria-labelledby="takeaways"><h2 id="takeaways">Key takeaways</h2>
{Array.isArray(ai?.takeaways) && ai.takeaways.length ? <ul>{ai.takeaways.map(i => <li set:html={i} />)}</ul> : <ul>
  <li><strong>Moats:</strong> short phrase.</li>
  <li><strong>Risk:</strong> short phrase.</li>
  <li><strong>Hiring:</strong> short phrase.</li>
</ul>}
</section>
<section class="card" aria-labelledby="numbers"><h2 id="numbers">By the numbers</h2>
{Array.isArray(ai?.numbers) && ai.numbers.length ? <ul>{ai.numbers.map(i => <li set:html={i} />)}</ul> : <ul>
  <li>~45–60 minutes</li>
  <li>3–5 named companies</li>
  <li>1–2 named frameworks</li>
</ul>}
</section>
<section class="card" aria-labelledby="quotes"><h2 id="quotes">Quotes</h2>
{Array.isArray(ai?.quotes) && ai.quotes.length
  ? <div>{ai.quotes.map(q => <figure><blockquote>“{q.text}”</blockquote><figcaption>— {q.speaker} {q.time && <time datetime={q.time}>{q.time}</time>}</figcaption></figure>)}</div>
  : <div></div>}
</section>
<section class="card" aria-labelledby="faq"><h2 id="faq">FAQ</h2>
{Array.isArray(ai?.faq) && ai.faq.length ? <dl>{ai.faq.map(i => <><dt>{i.q}</dt><dd>{i.a}</dd></>)}</dl> : <dl>
  <dt>Who is the guest?</dt><dd>One-sentence bio.</dd>
  <dt>What’s the guest’s edge?</dt><dd>One-sentence answer.</dd>
  <dt>Actionable steps mentioned?</dt><dd>One-sentence answer.</dd>
</dl>}
</section>
<section class="card" aria-labelledby="entities"><h2 id="entities">Entities mentioned</h2>
{Array.isArray(ai?.entities) && ai.entities.length ? <ul>{ai.entities.map(e => <li>{e.url ? <a href={e.url} rel="noopener">{e.name}</a> : e.name}</li>)}</ul> : <ul>
  <li>Entity 1</li>
  <li>Entity 2</li>
</ul>}
</section>

    <!-- Breadcrumb nav -->
    <nav aria-label="Breadcrumb" class="meta" style="margin-bottom:12px">
      <ol style="display:flex;gap:.5rem;list-style:none;padding:0;margin:0">
        <li><a href="https://everythingmachines.blog/">Everything Machines</a></li>
        <li>/</li>
        <li><a href="../">Series / Index</a></li>
        <li>/</li>
        <li aria-current="page">{page.title}</li>
      </ol>
    </nav>

    <section class="card" aria-labelledby="tldr"><h2 id="tldr">TL;DR</h2>
      {Array.isArray(ai?.tldr) && ai.tldr.length ? {Array.isArray(ai?.tldr) && ai.tldr.length ? <ul>{ai.tldr.map(i => <li set:html={i} />)}</ul> : <ul>
        <li>Who the guest is and why they matter.</li>
        <li>1–2 key frameworks or playbooks.</li>
        <li>One contrarian take or insight.</li>
      </ul>} : <ul>
        <li>Who the guest is and why they matter.</li>
        <li>1–2 key frameworks or playbooks.</li>
        <li>One contrarian take or insight.</li>
      </ul>}
    </section>

    <section class="card" aria-labelledby="learn"><h2 id="learn">What you’ll learn</h2>
      {Array.isArray(ai?.learn) && ai.learn.length ? <ul>{ai.learn.map(i => <li set:html={i} />)}</ul> : <ul>
        <li>Topic A the episode answers.</li>
        <li>Topic B the episode answers.</li>
        <li>Topic C the episode answers.</li>
      </ul>}
    </section>

    <section class="card" aria-labelledby="takeaways"><h2 id="takeaways">Key takeaways</h2>
      {Array.isArray(ai?.takeaways) && ai.takeaways.length ? {Array.isArray(ai?.takeaways) && ai.takeaways.length ? <ul>{ai.takeaways.map(i => <li set:html={i} />)}</ul> : <ul>
        <li><strong>Moats:</strong> short phrase.</li>
        <li><strong>Risk:</strong> short phrase.</li>
        <li><strong>Hiring:</strong> short phrase.</li>
      </ul>} : <ul>
        <li><strong>Moats:</strong> short phrase.</li>
        <li><strong>Risk:</strong> short phrase.</li>
        <li><strong>Hiring:</strong> short phrase.</li>
      </ul>}
    </section>

    <section class="card" aria-labelledby="numbers"><h2 id="numbers">By the numbers</h2>
      {Array.isArray(ai?.numbers) && ai.numbers.length ? {Array.isArray(ai?.numbers) && ai.numbers.length ? <ul>{ai.numbers.map(i => <li set:html={i} />)}</ul> : <ul>
        <li>~45–60 minutes</li>
        <li>3–5 named companies</li>
        <li>1–2 named frameworks</li>
      </ul>} : <ul>
        <li>~45–60 minutes</li>
        <li>3–5 named companies</li>
        <li>1–2 named frameworks</li>
      </ul>}
    </section>

    <section class="card" aria-labelledby="quotes"><h2 id="quotes">Quotes</h2>
      <figure>
        <blockquote>“Add a short, vivid pull-quote here.”</blockquote>
        <figcaption>— Guest <time datetime="00:12:10">12:10</time></figcaption>
      </figure>
      <figure>
        <blockquote>“Second crisp pull-quote.”</blockquote>
        <figcaption>— Guest <time datetime="00:27:45">27:45</time></figcaption>
      </figure>
    </section>

    <section class="card" aria-labelledby="faq"><h2 id="faq">FAQ</h2>
      {Array.isArray(ai?.faq) && ai.faq.length ? {Array.isArray(ai?.faq) && ai.faq.length ? <dl>{ai.faq.map(i => <><dt>{i.q}</dt><dd>{i.a}</dd></>)}</dl> : <dl>
        <dt>Who is the guest?</dt><dd>One-sentence bio.</dd>
        <dt>What’s the guest’s edge?</dt><dd>One-sentence answer.</dd>
        <dt>Actionable steps mentioned?</dt><dd>One-sentence answer.</dd>
      </dl>} : <dl>
        <dt>Who is the guest?</dt><dd>One-sentence bio.</dd>
        <dt>What’s the guest’s edge?</dt><dd>One-sentence answer.</dd>
        <dt>Actionable steps mentioned?</dt><dd>One-sentence answer.</dd>
      </dl>}
    </section>

    <section class="card" aria-labelledby="entities"><h2 id="entities">Entities mentioned</h2>
      {Array.isArray(ai?.entities) && ai.entities.length ? {Array.isArray(ai?.entities) && ai.entities.length ? <ul>{ai.entities.map(e => <li>{e.url ? <a href={e.url} rel="noopener">{e.name}</a> : e.name}</li>)}</ul> : <ul>
        <li>Entity 1</li>
        <li>Entity 2</li>
      </ul>} : <ul>
        <li>Entity 1</li>
        <li>Entity 2</li>
      </ul>}
    </section>

    <!-- Cached body (ensure first heading in source.md is H2, not H1) -->
    <section class="card" aria-labelledby="overview"><h2 id="overview">Overview</h2>
      <Source />
    </section>

    <section class="card" aria-labelledby="chapters"><h2 id="chapters">Chapters</h2>
      <ol>
        <li><a href="#t=0">00:00 Intro</a></li>
        <li><a href="#t=600">10:00 Topic</a></li>
        <li><a href="#t=1800">30:00 Topic</a></li>
      </ol>
    </section>

    <section class="card" aria-labelledby="transcript"><h2 id="transcript">Transcript</h2>
      <p class="meta">Download (when available): <a href="./transcript.txt" rel="noopener">./transcript.txt</a></p>
    </section>

    <section class="card" aria-labelledby="resources"><h2 id="resources">Resources</h2>
      <ul>
        <li><a href={page.urlOriginal} rel="noopener">Original page</a></li>
        <li><a href="./schema.json">schema.json</a> • <a href="./source.json">source.json</a></li>
      </ul>
    </section>

</main>

  <footer>
    <small>© {yr} {page.brandName} · Cached on everythingmachines.blog</small>
  </footer>
</body>
</html>


